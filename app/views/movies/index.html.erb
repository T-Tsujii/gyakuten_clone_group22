<div class="container-fluid">
  <div class="row">
    <% @movies.each.with_index(@movies.offset_value + 1) do |movie, i| %>
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card border-dark mb-3">
          <div class="card-header p-0">
            <div class="embed-responsive embed-responsive-16by9">
              <iframe class="embed-responsive-item" src=<%= movie.url%> allowfullscreen></iframe>
            </div>
          </div>

          <!-- 読破ボタン -->
            <% if @watched_movie_ids.include?(movie.id) %>
              <%= link_to movie_watches_path(movie), method: :delete, remote: true do %>
                <div class="btn btn-primary btn-block btn-sm">視聴済みを解除</div>
              <% end %>
            <% else %>
              <%= link_to movie_watches_path(movie), method: :post, remote: true do %>
                <div class="btn btn-secondary btn-block btn-sm">視聴済みにする</div>
              <% end %>            
            <% end %>

          <div class="card-body text-dark movie-body">
            <p class="card-text movie-title">
            Lv.<%= i %>：<%= movie.title %>
            </p>
          </div>
        </div>
      </div>
    <% end %>
    </div>
    <nav>
      <ul class="pagination pagination-sm">
        <%= paginate @movies %>
      </ul>
    </nav>
</div>
